(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0402"],{"93Qu":function(t,e,i){},EiMK:function(t,e,i){},NAa4:function(t,e,i){},OzGj:function(t,e,i){"use strict";var n=i("93Qu");i.n(n).a},QmU2:function(t,e,i){"use strict";i.r(e);var n=i("P2sY"),o=i.n(n),a=i("QbLZ"),s=i.n(a),l=i("L2JU"),c=i("M2If"),r=i("glbJ"),d=(i("ZOF2"),{name:"Notebook",components:{"mavon-editor":i("stgD").mavonEditor,Tinymce:r.a},computed:s()({},Object(l.b)(["notebook_info"])),data:function(){return{selected_notebook:[],notebookId:-1,noteData:{},inputStatus:!0,notEdit:!1,beforeEditNoteData:{}}},mounted:function(){var t=this;if(this.notebookId=this.$route.params.notebookId,console.log("notebookId"),console.log(this.notebookId),this.$store.dispatch("closeSideBar",!1),this.$route.meta.title=this.notebookId,this.$store.dispatch("editVisitedViews",this.$route),this.notebook_info.length>0)for(var e in this.notebook_info)this.notebook_info[e].id==this.notebookId&&(this.selected_notebook=this.notebook_info[e],this.noteData=this.selected_notebook.note[0],this.beforeEditNoteData=o()({},this.selected_notebook.note[0]),this.$route.meta.title=this.selected_notebook.note[0].title,this.$store.dispatch("editVisitedViews",this.$route));else Object(c.d)(this.notebookId).then(function(e){t.selected_notebook=e.data,t.noteData=t.selected_notebook.note[0],t.beforeEditNoteData=o()({},t.selected_notebook.note[0]),t.$route.meta.title=t.selected_notebook.note[0].title,t.$store.dispatch("editVisitedViews",t.$route)})},methods:{changeNote:function(t,e){var i=this;Object(c.e)(t).then(function(t){console.log(t.data),i.nodeIndex=e,i.selected_notebook.note[e]=t.data,i.beforeEditNoteData=o()({},i.selected_notebook.note[0]),i.$route.meta.title=t.data.title,i.$store.dispatch("editVisitedViews",i.$route)})},saveNote:function(t,e){var i=this;this.noteData.update_time=new Date,Object(c.f)(this.noteData.id,this.noteData).then(function(t){console.log(t),console.log(t.data),200==t.status?(i.$message({message:"《"+t.data.title+"》 更新成功。",type:"success"}),i.noteData=t.data,i.notEdit=!1,i.selected_notebook.note[i.nodeIndex]=t.data,i.beforeEditNoteData=o()({},t.data)):i.$message({message:"《"+i.noteData.title+"》更新失败！",type:"error"})})}}}),u=(i("p4aB"),i("KHd+")),h=Object(u.a)(d,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-container",[i("el-aside",{attrs:{width:"200px"}},[i("el-row",t._l(t.selected_notebook.note,function(e,n){return i("el-col",{key:e.id,attrs:{span:24}},[i("el-card",{staticClass:"card-class",attrs:{"body-style":{padding:"0px"}},nativeOn:{click:function(i){t.noteData=e,t.changeNote(e.id,n)}}},[i("div",{staticStyle:{padding:"15px"}},[i("span",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"bottom clearfix"},[i("time",{staticClass:"time"},[t._v(t._s(e.create_time))])])])])],1)}))],1),t._v(" "),i("el-main",[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:16}},[i("el-input",{attrs:{size:"medium"},model:{value:t.noteData.title,callback:function(e){t.$set(t.noteData,"title",e)},expression:"noteData.title"}})],1),t._v(" "),i("el-col",{attrs:{span:2}},[t.notEdit?t._e():i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.notEdit=!0}}},[t._v("编辑")])],1),t._v(" "),t.notEdit?i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveNote()}}},[t._v("保存")])],1):t._e(),t._v(" "),t.notEdit?i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.notEdit=!1,t.noteData=Object.assign({},t.beforeEditNoteData)}}},[t._v("取消")])],1):t._e()],1),t._v(" "),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},["markdown"==t.noteData.type&&t.notEdit?i("mavon-editor",{staticStyle:{height:"1000px"},attrs:{subfield:!1,defaultOpen:"edit"},on:{save:t.saveNote},model:{value:t.noteData.text,callback:function(e){t.$set(t.noteData,"text",e)},expression:"noteData.text"}}):t._e(),t._v(" "),"markdown"!=t.noteData.type||t.notEdit?"text"==t.noteData.type&&t.notEdit?i("tinymce",{attrs:{height:1e3},model:{value:t.noteData.text,callback:function(e){t.$set(t.noteData,"text",e)},expression:"noteData.text"}}):"text"!=t.noteData.type||t.notEdit?t._e():i("div",{staticClass:"editor-content",domProps:{innerHTML:t._s(t.noteData.text)}}):i("mavon-editor",{staticStyle:{height:"100px"},attrs:{subfield:!1,defaultOpen:"preview",toolbars:{}},model:{value:t.noteData.text,callback:function(e){t.$set(t.noteData,"text",e)},expression:"noteData.text"}})],1)],1)],1)],1)],1)},[],!1,null,null,null);h.options.__file="notebook.vue";e.default=h.exports},glbJ:function(t,e,i){"use strict";var n=i("4d7F"),o=i.n(n),a=i("GQeE"),s=i.n(a),l={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return s()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=s()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var i=e.uid,n=s()(this.listObj),o=0,a=n.length;o<a;o++)if(this.listObj[n[o]].uid===i)return this.listObj[n[o]].url=t.files.file,void(this.listObj[n[o]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=s()(this.listObj),n=0,o=i.length;n<o;n++)if(this.listObj[i[n]].uid===e)return void delete this.listObj[i[n]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,n=t.uid;return this.listObj[n]={},new o.a(function(o,a){var s=new Image;s.src=i.createObjectURL(t),s.onload=function(){e.listObj[n]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},o(!0)})}}},c=(i("wn0B"),i("KHd+")),r=Object(c.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,"39480e6e",null);r.options.__file="editorImage.vue";var d=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],u=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],h={name:"Tinymce",components:{editorImage:r.exports},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})},language:function(){var t=this;this.destroyTinymce(),this.$nextTick(function(){return t.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({language:this.language,selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:u,menubar:this.menubar,plugins:d,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",i.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'+t.url+'" >')})}}},b=(i("OzGj"),Object(c.a)(h,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:this.fullscreen}},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])},[],!1,null,"4b42c7ad",null));b.options.__file="index.vue";e.a=b.exports},p4aB:function(t,e,i){"use strict";var n=i("NAa4");i.n(n).a},wn0B:function(t,e,i){"use strict";var n=i("EiMK");i.n(n).a}}]);