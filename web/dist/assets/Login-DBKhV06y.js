import{_ as h,a as V}from"./github-9s1UjTr6.js";import{d as b,u as y,r as g,a as D,o as T,c as K,b as o,e as l,w as s,f as W,g as j,h as i,i as F,j as G,k as f,n as O,l as X,m as L,p as Q,E as B,_ as P}from"./index-D1B1L7By.js";const Y="/assets/wecom-CrDM2Kh5.png",q="data:image/png;base64,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",z="/assets/dingtalk-Bty8SPLc.png",Z={class:"login-container"},_={class:"login-box"},$={class:"login-content"},ee={class:"login-left"},oe={class:"decoration"},le={class:"login-right"},se={class:"form-footer"},te={class:"third-party-login"},ne={class:"login-icons"},re=b({__name:"Login",setup(ie){const w=F(),E=W(),I=y(),m=g(),c=g(!1),A=g(!1),a=g({wecom_url:null,feishu_url:null,dingtalk_url:null,github_url:null}),t=D({username:"",password:""}),k={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},R=async()=>{m.value&&await m.value.validate(async n=>{if(n){c.value=!0;try{console.log(t),await I.login(t.username,t.password),A.value?localStorage.setItem("username",t.username):localStorage.removeItem("username"),w.push("/")}catch(e){B.error("登录失败："+e.message),console.error(e)}finally{c.value=!1}}})},C=localStorage.getItem("username");C&&(t.username=C,A.value=!0);const H=async()=>{try{const n=await j.getLoginQRCode();a.value=n.data}catch(n){console.error("获取第三方登录二维码失败:",n)}},u=n=>{n?window.location.href=n:B.warning("该登录方式未配置")};return T(()=>{H();const{username:n,password:e}=E.query;n&&(t.username=n),e&&(t.password=e)}),(n,e)=>{const N=i("el-icon"),v=i("el-input"),p=i("el-form-item"),x=i("el-checkbox"),U=i("el-link"),J=i("el-button"),d=i("el-tooltip"),S=i("el-form"),M=i("el-card");return G(),K("div",Z,[o("div",_,[o("div",$,[o("div",ee,[e[10]||(e[10]=o("div",{class:"welcome-text"},[o("h1",null,"蜜蜂🐝笔记"),o("p",null,"便捷记录、高效管理、安全可靠")],-1)),o("div",oe,[l(N,{class:"icon-note"},{default:s(()=>[l(f(O))]),_:1}),e[7]||(e[7]=o("div",{class:"circle circle-1"},null,-1)),e[8]||(e[8]=o("div",{class:"circle circle-2"},null,-1)),e[9]||(e[9]=o("div",{class:"circle circle-3"},null,-1))])]),o("div",le,[l(M,{class:"login-card"},{header:s(()=>e[11]||(e[11]=[o("div",{class:"card-header"},[o("img",{src:h,class:"logo",alt:"logo"}),o("h2",null,"用户登录")],-1)])),default:s(()=>[l(S,{model:t,rules:k,ref_key:"loginFormRef",ref:m,class:"login-form"},{default:s(()=>[l(p,{prop:"username"},{default:s(()=>[l(v,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=r=>t.username=r),placeholder:"用户名","prefix-icon":f(X),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),l(p,{prop:"password"},{default:s(()=>[l(v,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=r=>t.password=r),type:"password",placeholder:"密码","prefix-icon":f(L),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),o("div",se,[l(x,{modelValue:A.value,"onUpdate:modelValue":e[2]||(e[2]=r=>A.value=r)},{default:s(()=>e[12]||(e[12]=[Q("记住我")])),_:1},8,["modelValue"]),l(U,{type:"primary"},{default:s(()=>e[13]||(e[13]=[Q("忘记密码？")])),_:1})]),l(p,null,{default:s(()=>[l(J,{type:"primary",onClick:R,loading:c.value,class:"login-button",size:"large"},{default:s(()=>e[14]||(e[14]=[Q(" 登录 ")])),_:1},8,["loading"])]),_:1}),o("div",te,[e[19]||(e[19]=o("div",{class:"divider"},[o("span",null,"第三方账号登录")],-1)),o("div",ne,[l(d,{content:"企业微信登录",placement:"top"},{default:s(()=>[o("div",{class:"login-icon",onClick:e[3]||(e[3]=r=>u(a.value.wecom_url))},e[15]||(e[15]=[o("img",{src:Y,alt:"企业微信"},null,-1)]))]),_:1}),l(d,{content:"飞书登录",placement:"top"},{default:s(()=>[o("div",{class:"login-icon",onClick:e[4]||(e[4]=r=>u(a.value.feishu_url))},e[16]||(e[16]=[o("img",{src:q,alt:"飞书"},null,-1)]))]),_:1}),l(d,{content:"钉钉登录",placement:"top"},{default:s(()=>[o("div",{class:"login-icon",onClick:e[5]||(e[5]=r=>u(a.value.dingtalk_url))},e[17]||(e[17]=[o("img",{src:z,alt:"钉钉"},null,-1)]))]),_:1}),l(d,{content:"GitHub登录",placement:"top"},{default:s(()=>[o("div",{class:"login-icon",onClick:e[6]||(e[6]=r=>u(a.value.github_url))},e[18]||(e[18]=[o("img",{src:V,alt:"GitHub"},null,-1)]))]),_:1})])])]),_:1},8,["model"])]),_:1})])])])])}}}),ue=P(re,[["__scopeId","data-v-fce18b04"]]);export{ue as default};
