import{_ as N}from"./logo-FnfcyM4Z.js";import{d as R,u as h,r as c,a as q,c as z,b as o,e as s,w as l,f as a,g as B,o as F,h as p,n as L,i as T,l as j,j as f,k as w,_ as E}from"./index-_txKB2za.js";const J={class:"login-container"},M={class:"login-box"},O={class:"login-content"},A={class:"login-left"},D={class:"decoration"},G={class:"login-right"},H={class:"form-footer"},K=R({__name:"Login",setup(P){const b=B(),_=h(),u=c(),d=c(!1),n=c(!1),t=q({username:"",password:""}),k={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},V=async()=>{u.value&&await u.value.validate(async v=>{if(v){d.value=!0;try{const e=await w.post("/auth/login/",t);_.setToken(e.data.access);const i=await w.get("/auth/me/");_.setUser(i.data),localStorage.setItem("user",JSON.stringify(i.data)),n.value?localStorage.setItem("username",t.username):localStorage.removeItem("username"),b.push("/")}catch(e){console.error(e)}finally{d.value=!1}}})},g=localStorage.getItem("username");return g&&(t.username=g,n.value=!0),(v,e)=>{const i=a("el-icon"),x=a("el-input"),m=a("el-form-item"),y=a("el-checkbox"),S=a("el-link"),U=a("el-button"),I=a("el-form"),C=a("el-card");return F(),z("div",J,[o("div",M,[o("div",O,[o("div",A,[e[6]||(e[6]=o("div",{class:"welcome-text"},[o("h1",null,"蜜蜂笔记"),o("p",null,"便捷记录、高效管理、安全可靠")],-1)),o("div",D,[s(i,{class:"icon-note"},{default:l(()=>[s(p(L))]),_:1}),e[3]||(e[3]=o("div",{class:"circle circle-1"},null,-1)),e[4]||(e[4]=o("div",{class:"circle circle-2"},null,-1)),e[5]||(e[5]=o("div",{class:"circle circle-3"},null,-1))])]),o("div",G,[s(C,{class:"login-card"},{header:l(()=>e[7]||(e[7]=[o("div",{class:"card-header"},[o("img",{src:N,class:"logo",alt:"logo"}),o("h2",null,"用户登录")],-1)])),default:l(()=>[s(I,{model:t,rules:k,ref_key:"loginFormRef",ref:u,class:"login-form"},{default:l(()=>[s(m,{prop:"username"},{default:l(()=>[s(x,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=r=>t.username=r),placeholder:"用户名","prefix-icon":p(T),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),s(m,{prop:"password"},{default:l(()=>[s(x,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=r=>t.password=r),type:"password",placeholder:"密码","prefix-icon":p(j),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),o("div",H,[s(y,{modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=r=>n.value=r)},{default:l(()=>e[8]||(e[8]=[f("记住我")])),_:1},8,["modelValue"]),s(S,{type:"primary"},{default:l(()=>e[9]||(e[9]=[f("忘记密码？")])),_:1})]),s(m,null,{default:l(()=>[s(U,{type:"primary",onClick:V,loading:d.value,class:"login-button",size:"large"},{default:l(()=>e[10]||(e[10]=[f(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])])])])}}}),X=E(K,[["__scopeId","data-v-2fda08a5"]]);export{X as default};
